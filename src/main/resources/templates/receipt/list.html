<!DOCTYPE html>
<html lang="en">
<head th:replace="~{layout/head::head ('Danh sách hóa đơn')}">
</head>

<body class="hold-transition sidebar-mini layout-fixed text-sm">
  <div class="wrapper">
    <th:block th:insert="~{layout/sidebar::sidebar}"></th:block>
    <div class="content-wrapper">
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="page-title m-0">Danh sách hóa đơn</h1>
            </div><!-- /.col -->
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>

      <section class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div class="card card-default">
                <div class="card-body">
                  <form class="clearfix" action="/receipt" method="GET">
                    <div class="form-group row align-items-center">
                      <div class="col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Từ ngày</label>
                          <div class="col-sm-10">
                            <div class="form-group">
                              <div class="input-group date" id="datetimepicker1" data-target-input="nearest">
                                <input type="text" class="form-control datepicker datetimepicker-input" name="created_from" th:value="${search!=null&&search.containsKey('created_from')?search.created_from:''}" data-toggle="datetimepicker"/>
                                <div class="input-group-append">
                                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="offset-md-1 col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Đến ngày</label>
                          <div class="col-sm-10">
                            <div class="form-group">
                              <div class="input-group date" id="datetimepicker2" data-target-input="nearest">
                                <input type="text" class="form-control datepicker datetimepicker-input" name="created_to" th:value="${search!=null&&search.containsKey('created_to')?search.created_to:''}" data-toggle="datetimepicker"/>
                                <div class="input-group-append">
                                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row align-items-center">
                      <div class="col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Từ giờ</label>
                          <div class="col-sm-10">
                            <div class="form-group">
                              <div class="input-group date" id="datetimepicker3" data-target-input="nearest">
                                <input type="text" class="form-control timepicker datetimepicker-input" name="hour_from" th:value="${search!=null&&search.containsKey('hour_from')?search.hour_from:''}" data-toggle="datetimepicker"/>
                                <div class="input-group-append">
                                  <div class="input-group-text"><i class="fa-solid fa-clock"></i></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="offset-md-1 col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Đến giờ</label>
                          <div class="col-sm-10">
                            <div class="form-group">
                              <div class="input-group" id="datetimepicker4">
                                <input type="text" class="form-control timepicker datetimepicker-input" name="hour_to" th:value="${search!=null&&search.containsKey('hour_to')?search.hour_to:''}" data-toggle="datetimepicker"/>
                                <div class="input-group-append">
                                  <div class="input-group-text"><i class="fa-solid fa-clock"></i></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row align-items-center">
                      <div class="col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Hiển thị</label>
                          <div class="col-sm-10">
                              <select class="form-select form-control-sm" name="receipt_type">
                                  <option value="">-- Chọn loại bán hàng --</option>
                                  <option th:each="type : ${receipt_type}" th:value="${type.key}" th:text="${type.value}" th:selected="${search != null && search.containsKey('receipt_type') && search.get('receipt_type') == type.key}"></option>
                              </select>
                          </div>
                        </div>
                      </div>
                      <div class="offset-md-1 col-md-5">
                        <div class="row">
                          <label class="col-sm-2 col-form-label col-form-label-sm">Sắp xếp</label>
                          <div class="col-sm-10">
                            <div class="col-sm-10">
                              <select class="form-select form-control-sm" name="sortBy">
                                <option value="">-- Chọn loại sắp xếp --</option>
                                <option th:each="entry : ${receipt_sortBy}"
                                        th:value="${entry.key}"
                                        th:text="${entry.value}"
                                        th:selected="${search != null && search.containsKey('sortBy') && search.sortBy == entry.key}">
                                </option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="text-right">
                      <button type="submit" class="btn btn-sm btn-primary w-120px">Xem</button>
                    </div>
                  </form>

                  <div class="mt-2">
                    <div class="mt-4">
                      <div class="table-responsive" style="max-height: 600px;">
                        <table class="table table-bordered table-hover table-valign-middle table-head-fixed text-nowrap text-center">
                          <thead>
                          <tr>
                            <th class="bg-light">Mã hóa đơn</th>
                            <th class="bg-light">Tên khách hàng</th>
                            <th class="bg-light">Ngày lập</th>
                            <th class="bg-light">Giờ lập</th>
                            <th class="bg-light">Người lập</th>
                            <th class="bg-light">Tổng tiền</th>
                            <th class="bg-light">Ghi chú</th>
                            <th class="bg-light">Chức năng</th>
                          </tr>
                          </thead>
                          <tbody>
                            <tr th:if="${receipts.isEmpty()}">
                              <td colspan="8">Không tìm thấy dữ liệu</td>
                            </tr>
                            <tr th:each="receipt : ${receipts}">
                              <td th:text="${receipt.code}"></td>
                              <td th:text="${receipt.customer.name}"></td>
                              <td th:text="${#temporals.format(receipt.createdAt, 'dd/MM/yyyy')}"></td>
                              <td th:text="${#temporals.format(receipt.createdAt, 'HH:mm:ss')}"></td>
                              <td th:text="${receipt.employee.fullName}"></td>
                              <td th:text="${receipt.total}"></td>
                              <td th:text="${receipt.note}"></td>
                              <td th:text="${receipt.note}"></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div th:insert="~{layout/paginator :: pagination(
                          page=${receipts},
                          url='/receipt',
                          queryParams=${queryParams})
                      }">
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /.card-body -->
              </div>
            </div>
            <!-- ./col -->
          </div>
        </div><!-- /.container-fluid -->
      </section>
    </div>
  </div>
</body>
<th:block th:replace="~{layout/script::script}">
</th:block>
</html>